# 0006. Варианты группировки фичей

Дата: 13.10.2025

## Статус

Принято

## Контекст

После установления принципа разделения `api`/`impl` и концепции единой точки входа, необходимо определить различные паттерны
организации фичей в зависимости от их сложности и функциональных требований.

## Решение

Определяем единый паттерн структурирования фичей с возможностью группировки в папках для удобства организации.

### Single feature

**Суть:** Одна фича с разделением на `api` и `impl` модули. Несколько связанных фичей можно группировать в одной папке для удобства организации, но каждая фича остается независимой с собственными `api` и `impl` модулями.

**Когда использовать:**

- Фича имеет чёткую изолированную функциональность
- Простая и понятная доменная область
- Упрощение структуры проекта

**Структура:** `:feature:<name>:api` + `:feature:<name>:impl`

**Именование пакетов:**

- `api`: `<package>.feature.<feature.name>`
- `impl`: `<package>.feature.<feature.name>.impl`

*Подробнее см. ADR [0007](0007-feature-naming-conventions.md) - Конвенции именования feature-модулей*

**Примеры:**

*Независимая фича:*

```
feature/
└── payments/
    ├── api/                              # API-модуль :feature:payments:api
    └── impl/                             # Impl-модуль :feature:payments:impl
```

*Группировка связанных фичей в папке:*

```
feature/
└── auth/                                 # Папка для группировки auth-фичей
    ├── email/
    │   ├── api/                          # API-модуль :feature:auth:email:api
    │   └── impl/                         # Impl-модуль :feature:auth:email:impl
    ├── social/
    │   ├── api/                          # API-модуль :feature:auth:social:api
    │   └── impl/                         # Impl-модуль :feature:auth:social:impl
    └── password-reset/
        ├── api/                          # API-модуль :feature:auth:password-reset:api
        └── impl/                         # Impl-модуль :feature:auth:password-reset:impl
```

### Принципы именования см. ADR [0007](0007-feature-naming-conventions.md) - Конвенции именования feature-модулей

### Принципы выбора структуры

**Независимая фича:**

- Все фичи используют единый паттерн: `api` + `impl` модули
- Каждая фича независима и имеет собственную реализацию
- Большинство обычных domain-фичей

**Группировка в папках:**

- Связанные фичи можно группировать в одной папке для удобства организации
- Группировка не создает общих зависимостей между фичами
- Каждая фича остается независимой с собственными `api` и `impl` модулями

### Общие принципы

- Каждая фича максимально независима
- Каждый `impl`-модуль реализует только свою фичу из своего пакета
- Группировка в папках используется только для удобства организации, не создает архитектурных зависимостей
- Предпочтительно дублировать модели, чем создавать зависимости между фичами

## Последствия

**Положительные:**

- Упрощенная и единообразная структура для всех фичей
- Возможность группировки связанных фичей в папках для удобства организации
- Чёткое разделение ответственности между `api` и `impl` модулями
- Независимость каждой фичи от других

**Отрицательные:**

- Отсутствие возможности создания общих API модулей для группы фичей
- Потенциальное дублирование кода между связанными фичами
